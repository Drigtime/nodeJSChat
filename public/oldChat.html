<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>NodeJs Chat</title>
    <link href="css/style.css" rel="stylesheet">
</head>

<body>
    <div class="header">
        <h1 id="title">
            Chat Groupe 1
        </h1>
        <br />
        <form class="formulaire">
            <input type="text" id="username" placeholder="Votre pseudonyme"><br />
            <textarea id="message" placeholder="Tapper votre message"></textarea><br />
            <input type="submit" id="submit">
        </form>

        <div id="response"></div>

        <ul id="messages" style="list-style:none;"></ul>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script>
            $(document).ready(function () {
                let socket = io();
                $('#submit').on('click', function (e) {
                    e.preventDefault();

                    let data = {
                        username: $('#username').val(),
                        message: $('#message').val()
                    };

                    socket.emit('new message', data);
                });

                socket.on('new message', function (msg) {
                    $('#messages').append($('<li>').text(`[${msg.username}] ${msg.message}`));
                });
            });
        </script>
</body>

</html>